(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[28],{394:function(e,t,c){"use strict";c(1);var r=c(392),s=c(22);t.a=e=>Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(r.a,{color:e.data.color,children:Object(s.jsx)("strong",{children:e.data.alertMsg})})})},396:function(e,t,c){"use strict";var r=c(1),s=c.n(r),a=c(392),i=c(22);const j=e=>Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(a.I,{backdrop:"static",visible:e.open,onClose:()=>e.close(),children:[Object(i.jsx)(a.L,{children:Object(i.jsx)(a.M,{children:e.titleModal})}),Object(i.jsx)(a.J,{children:e.descModal}),Object(i.jsxs)(a.K,{children:[Object(i.jsx)(a.f,{color:"secondary",onClick:()=>e.close(),children:"Close"}),Object(i.jsx)(a.f,{color:"primary",onClick:()=>{e.data(e.itemID),e.close()},children:"Ok"})]})]})});t.a=s.a.memo(j)},397:function(e,t,c){"use strict";c(1),c(398);var r=c(399),s=c(22);t.a=e=>Object(s.jsxs)(r.a,{width:"100%",height:550,viewBox:"0 0 1000 550",backgroundColor:"#eaeced",foregroundColor:"#ffffff",...e,children:[Object(s.jsx)("rect",{x:"51",y:"45",rx:"3",ry:"3",width:"906",height:"17"}),Object(s.jsx)("circle",{cx:"879",cy:"123",r:"11"}),Object(s.jsx)("circle",{cx:"914",cy:"123",r:"11"}),Object(s.jsx)("rect",{x:"104",y:"115",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"305",y:"114",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"661",y:"114",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"55",y:"155",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("circle",{cx:"880",cy:"184",r:"11"}),Object(s.jsx)("circle",{cx:"915",cy:"184",r:"11"}),Object(s.jsx)("rect",{x:"105",y:"176",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"306",y:"175",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"662",y:"175",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"56",y:"216",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("circle",{cx:"881",cy:"242",r:"11"}),Object(s.jsx)("circle",{cx:"916",cy:"242",r:"11"}),Object(s.jsx)("rect",{x:"106",y:"234",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"307",y:"233",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"663",y:"233",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"57",y:"274",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("circle",{cx:"882",cy:"303",r:"11"}),Object(s.jsx)("circle",{cx:"917",cy:"303",r:"11"}),Object(s.jsx)("rect",{x:"107",y:"295",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"308",y:"294",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"664",y:"294",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"58",y:"335",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("circle",{cx:"881",cy:"363",r:"11"}),Object(s.jsx)("circle",{cx:"916",cy:"363",r:"11"}),Object(s.jsx)("rect",{x:"106",y:"355",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"307",y:"354",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"663",y:"354",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"57",y:"395",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("circle",{cx:"882",cy:"424",r:"11"}),Object(s.jsx)("circle",{cx:"917",cy:"424",r:"11"}),Object(s.jsx)("rect",{x:"107",y:"416",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"308",y:"415",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"664",y:"415",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"55",y:"453",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("rect",{x:"51",y:"49",rx:"3",ry:"3",width:"2",height:"465"}),Object(s.jsx)("rect",{x:"955",y:"49",rx:"3",ry:"3",width:"2",height:"465"}),Object(s.jsx)("circle",{cx:"882",cy:"484",r:"11"}),Object(s.jsx)("circle",{cx:"917",cy:"484",r:"11"}),Object(s.jsx)("rect",{x:"107",y:"476",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"308",y:"475",rx:"3",ry:"3",width:"299",height:"15"}),Object(s.jsx)("rect",{x:"664",y:"475",rx:"3",ry:"3",width:"141",height:"15"}),Object(s.jsx)("rect",{x:"55",y:"513",rx:"3",ry:"3",width:"897",height:"2"}),Object(s.jsx)("rect",{x:"52",y:"80",rx:"3",ry:"3",width:"906",height:"17"}),Object(s.jsx)("rect",{x:"53",y:"57",rx:"3",ry:"3",width:"68",height:"33"}),Object(s.jsx)("rect",{x:"222",y:"54",rx:"3",ry:"3",width:"149",height:"33"}),Object(s.jsx)("rect",{x:"544",y:"55",rx:"3",ry:"3",width:"137",height:"33"}),Object(s.jsx)("rect",{x:"782",y:"56",rx:"3",ry:"3",width:"72",height:"33"}),Object(s.jsx)("rect",{x:"933",y:"54",rx:"3",ry:"3",width:"24",height:"33"})]})},577:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c(16),a=c(404),i=c(392),j=c(396),o=c(462),n=c.n(o),l=c(394),h=(c(432),c(420)),x=c(401),d=c(22);var b=e=>{const[t,c]=Object(r.useState)(!1),[s,a]=Object(r.useState)({});var[j,o]=Object(r.useState)([]);const[b,O]=Object(r.useState)([]),[y,u]=Object(r.useState)(),[g,m]=Object(r.useState)(),[p,w]=Object(r.useState)();var[v,f]=Object(r.useState)(!1);const[S,N]=Object(r.useState)({alertMsg:"No order found",color:"warning"}),k=e.data,C=async()=>{M();try{const e=await fetch("".concat("https://express-server-a.herokuapp.com","/api/reports/product/sold/")+k,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify({startDate:y,endDate:p,searchData:g})});if(c(!0),200===e.status){const t=await e.json();f(!1);for(let e=1;e<=Math.ceil(t.length/10);e++)b.push(e);for(let e=0;e<10&&e<t.length;e++)t[e][2]>0&&j.push(t[e]);a(t),c(!1)}404===e.status&&(f(!0),N({alertMsg:"No data found",color:"warning"}),c(!1)),0===j.length&&(f(!0),N({alertMsg:"No one ordered this product",color:"warning"}),c(!1)),401===e.status&&(f(!0),c(!1),N({alertMsg:"Unauthorized access",color:"warning"}))}catch(e){f(!0),N({alertMsg:"Internal server Error",color:"warning"}),console.log(e,"error")}},M=()=>{j.splice(0,j.length),b.splice(0,b.length)};return Object(r.useEffect)((()=>{C()}),[]),Object(d.jsx)("div",{children:Object(d.jsx)(i.U,{children:Object(d.jsx)(i.l,{xs:12,sm:6,children:Object(d.jsxs)(i.h,{className:"mb-4",children:[Object(d.jsx)(i.k,{children:Object(d.jsx)("strong",{children:"Customer Loyalty for this Product"})}),Object(d.jsxs)(i.i,{children:[Object(d.jsxs)(i.u,{className:"row g-4",children:[Object(d.jsx)("div",{className:"col-auto",children:"From "}),Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsx)(n.a,{dateFormat:"yyyy-MM-dd",onChange:e=>u(e),selected:y,selectsStart:!0,startDate:y,endDate:p,maxDate:new Date,calendarStartDay:1})}),Object(d.jsx)("div",{className:"col-auto",children:"To "}),Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsx)(n.a,{dateFormat:"yyyy-MM-dd",onChange:e=>w(e),selected:p,selectsEnd:!0,startDate:y,endDate:p,minDate:y,maxDate:new Date,calendarStartDay:1})}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsx)(i.w,{id:"search",name:"search",placeholder:"Search by Name",onChange:e=>{m(e.target.value)}})}),Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsxs)(i.f,{color:"primary",onClick:()=>C(),children:[Object(d.jsx)(x.a,{icon:h.a,className:"me-2"}),"Search"]})})]}),Object(d.jsx)("br",{}),j.length>0?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(i.U,{children:Object(d.jsx)(i.l,{xs:12,sm:12,children:Object(d.jsx)(i.h,{className:"mb-4",children:Object(d.jsxs)(i.i,{children:[Object(d.jsx)(i.l,{xs:12,children:v?Object(d.jsx)(l.a,{data:S}):null}),Object(d.jsxs)(i.cb,{bordered:!0,hover:!0,children:[Object(d.jsx)(i.fb,{color:"dark",children:Object(d.jsxs)(i.hb,{children:[Object(d.jsx)(i.gb,{scope:"col",children:"Customer"}),Object(d.jsx)(i.gb,{scope:"col",children:"Order Count"}),Object(d.jsx)(i.gb,{scope:"col",children:"Product Count"}),Object(d.jsx)(i.gb,{scope:"col",children:"Avg"})]})}),Object(d.jsx)(i.db,{children:j.map(((e,t)=>Object(d.jsxs)(i.hb,{children:[Object(d.jsx)(i.eb,{children:e[0]}),Object(d.jsx)(i.eb,{children:e[2]}),Object(d.jsx)(i.eb,{children:e[1]}),Object(d.jsx)(i.eb,{children:e[2]/e[1]?Math.round(e[1]/e[2]):0})]},t)))})]}),Object(d.jsx)(i.S,{align:"center",children:b.map(((e,t)=>Object(d.jsx)(i.T,{onClick:()=>(e=>{o((e=>[]));for(let t=10*e;t<10*(e+1)&&void 0!==s[t];t++)o((e=>[...e,s[t]]))})(t),children:e},t)))})]})})})})}):Object(d.jsx)(i.l,{xs:12,children:v?Object(d.jsx)(l.a,{data:S}):null})]})]})})})})},O=c(397);t.default=()=>{const{register:e,handleSubmit:t,reset:c,formState:{errors:o}}=Object(a.a)({mode:"onTouched"}),[n,h]=Object(r.useState)(!0),[x,y]=Object(r.useState)(!1);var[u,g]=Object(r.useState)(!1);const[m,p]=Object(r.useState)({alertMsg:"",color:"success"}),[w,v]=Object(r.useState)(),[f,S]=Object(r.useState)(),[N,k]=Object(r.useState)(!1),C=Object(s.g)(),M=Object(s.i)();return Object(r.useEffect)((()=>{(async()=>{const e=M.id;h(!0);try{const t=await fetch("".concat("https://express-server-a.herokuapp.com","/api/category/list"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")}}),c=await fetch("".concat("https://express-server-a.herokuapp.com","/api/product/")+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")}});if(200===t.status){const e=await t.json();v(e.categories);const r=await c.json();S(r.product)}h(!1)}catch(t){g(!0),p({alertMsg:"Sorry !! We are encountering an issue!",color:"warning"}),console.error("Error:",t)}})()}),[]),Object(r.useEffect)((()=>{c(f)}),[f]),n?Object(d.jsx)(O.a,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(i.l,{xs:6,children:u?Object(d.jsx)(l.a,{data:m}):null}),Object(d.jsx)(j.a,{open:N,close:k,data:()=>{C.push("/products")},onClick:()=>{k(!1)},titleModal:"Updated Successfully",descModal:"Product has been updated",visible:N}),Object(d.jsx)(i.U,{children:Object(d.jsx)(i.l,{xs:12,sm:6,children:Object(d.jsxs)(i.h,{className:"mb-4",children:[Object(d.jsx)(i.k,{children:Object(d.jsx)("strong",{children:"Edit Product"})}),Object(d.jsx)(i.i,{children:Object(d.jsxs)(i.u,{onSubmit:t((async e=>{const t=M.id;delete e._id,console.log(e),g(!1);try{y(!0);const c=await fetch("".concat("https://express-server-a.herokuapp.com","/api/product/")+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(e)});200===c.status&&(k(!0),y(!1)),409===c.status&&(y(!1),g(!0),p({alertMsg:"Already Exist",color:"warning"})),y(!1)}catch(c){console.error("Error:",c),g(!0),p({alertMsg:"Internal server Error",color:"warning"})}})),children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)(i.x,{htmlFor:"exampleFormControlInput1",children:"Product Name"}),Object(d.jsx)(i.w,{type:"text",id:"productName",name:"productName",placeholder:"Egg Burger Bun",invalid:!!o.productName,...e("productName",{required:"Required",pattern:{value:/^[a-zA-Z0-9 ]+$/,message:"Enter valid name"}})}),o.productName&&Object(d.jsx)("span",{style:{color:"red"},children:o.productName.message})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)(i.x,{htmlFor:"exampleFormControlInput1",children:"Category Name"}),Object(d.jsx)(i.y,{name:"categoryName",invalid:!!o.categoryName,...e("category_id._id"),"aria-label":"Default select example",children:w.map(((e,t)=>Object(d.jsx)("option",{value:e._id,children:e.categoryName},t)))}),o.category_id&&Object(d.jsx)("span",{style:{color:"red"},children:o.category_id.message})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)(i.x,{htmlFor:"exampleFormControlInput1",children:"Stocks"}),Object(d.jsx)(i.w,{type:"number",id:"inStock",name:"inStock",placeholder:"100",min:0,invalid:!!o.inStock,...e("inStock",{required:"Required",pattern:{value:/^(0|[1-9]\d*)$/,message:"Must be a valid positive number"}})}),o.inStock&&Object(d.jsx)("span",{style:{color:"red"},children:o.inStock.message})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)(i.x,{htmlFor:"exampleFormControlInput1",children:"Price"}),Object(d.jsx)(i.w,{type:"text",id:"price",name:"price",placeholder:"Burger Bun",invalid:!!o.price,...e("price",{required:"Required",min:{value:1,message:"Enter price"},pattern:{value:/^(0|[1-9]\d*)(\.\d+)?$/,message:"Must be a valid number"}})}),o.price&&Object(d.jsx)("span",{style:{color:"red"},children:o.price.message})]}),Object(d.jsxs)(i.f,{color:"primary",size:"sm",className:"px-4",type:"submit",children:[x?Object(d.jsx)(i.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,x?"Loading":"Save"]})]})})]})})}),Object(d.jsx)(b,{data:M.id})]})}}}]);
//# sourceMappingURL=28.6e489b22.chunk.js.map