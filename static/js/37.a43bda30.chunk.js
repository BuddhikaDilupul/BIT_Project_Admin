(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[37],{394:function(e,t,c){"use strict";c(1);var s=c(392),n=c(22);t.a=e=>Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(s.a,{color:e.data.color,children:Object(n.jsx)("strong",{children:e.data.alertMsg})})})},560:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c(392),a=c(418),r=(c(409),c(410),c(407)),l=c(411),o=c(394),i=c(22);t.default=()=>{const[e,t]=Object(s.useState)([]),[c,j]=Object(s.useState)(!1),[h,b]=Object(s.useState)([]),[d,O]=Object(s.useState)([]);var[x,m]=Object(s.useState)([]),[u,g]=Object(s.useState)([]);const[p,f]=Object(s.useState)(!1),[v,S]=Object(s.useState)({alertMsg:"",color:"success"}),[w,k]=Object(s.useState)([{startDate:new Date,endDate:Object(r.default)(new Date,0),key:"selection"}]);const I=()=>{u.splice(0,u.length),x.splice(0,x.length),h.splice(0,h.length),e.splice(0,e.length),d.splice(0,d.length)};return Object(i.jsxs)("div",{children:[Object(i.jsx)(n.l,{xs:6,children:p?Object(i.jsx)(o.a,{data:v}):null}),Object(i.jsx)(n.U,{children:Object(i.jsx)(n.l,{xs:12,sm:12,children:Object(i.jsxs)(n.h,{className:"mb-4",children:[Object(i.jsx)(n.k,{children:Object(i.jsx)("strong",{children:"Overall Income"})}),Object(i.jsx)(n.i,{children:Object(i.jsxs)(n.u,{className:"row g-4",children:[Object(i.jsx)("div",{className:"col-auto",children:Object(i.jsx)(l.DateRangePicker,{onChange:e=>k([e.selection]),showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:1,ranges:w,direction:"horizontal",maxDate:new Date})}),Object(i.jsx)("div",{className:"col-auto",children:Object(i.jsxs)(n.f,{color:"primary",size:"sm",className:"px-4",onClick:()=>{(async()=>{I();try{j(!0);const t=await fetch("".concat("https://express-server-a.herokuapp.com","/api/reports/income"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify({state:w})});if(200===t.status){f(!1);const c=await t.json();for(let e=1;e<=Math.ceil(c.totalIncome.length/10);e++)h.push(e);for(let e=0;e<10&&e<c.totalIncome.length;e++)u.push(c.totalIncome[e]);for(let t=0;t<c.totalIncome.length;t++)e.push(c.totalIncome[t][1]),d.push(c.totalIncome[t][0]);m(c.totalIncome),j(!1)}404===t.status&&(f(!0),S({alertMsg:"No data found",color:"warning"}),j(!1)),401===t.status&&(f(!0),j(!1),S({alertMsg:"Unauthorized access",color:"warning"}))}catch(t){f(!0),S({alertMsg:"Internal server Error",color:"warning"}),console.log(t)}})()},children:[c?Object(i.jsx)(n.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,c?"Loading":"Generate"]})})]})})]})})}),x.length>0?Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(n.U,{children:Object(i.jsx)(n.l,{xs:12,sm:6,children:Object(i.jsxs)(n.h,{className:"mb-4",children:[Object(i.jsx)(n.k,{children:Object(i.jsx)("strong",{children:"Income Report"})}),Object(i.jsxs)(n.i,{children:[Object(i.jsx)("p",{className:"text-medium-emphasis small",children:"Here the income report of your shop."}),Object(i.jsxs)(n.cb,{bordered:!0,hover:!0,children:[Object(i.jsx)(n.fb,{color:"dark",children:Object(i.jsxs)(n.hb,{children:[Object(i.jsx)(n.gb,{scope:"col",children:"Date"}),Object(i.jsx)(n.gb,{scope:"col",children:"Total Income"})]})}),Object(i.jsx)(n.db,{children:u.map(((e,t)=>{return Object(i.jsxs)(n.hb,{children:[Object(i.jsx)(n.eb,{children:e[0]}),Object(i.jsxs)(n.eb,{children:["LKR ",(c=e[1],"".concat(c.toFixed(2)))]})]},t);var c}))})]}),Object(i.jsx)(n.S,{align:"center",children:h.map(((e,t)=>Object(i.jsx)(n.T,{onClick:()=>(e=>{g((e=>[]));for(let t=10*e;t<10*(e+1)&&void 0!==x[t];t++)g((e=>[...e,x[t]]))})(t),children:e},t)))})]})]})})})}):null,e.length>0?Object(i.jsx)(n.U,{children:Object(i.jsx)(n.l,{xs:12,children:Object(i.jsxs)(n.h,{className:"mb-4",children:[Object(i.jsx)(n.k,{children:Object(i.jsx)("strong",{children:"Income of Your Shop "})}),Object(i.jsx)(n.i,{children:Object(i.jsx)(a.a,{data:{labels:d,datasets:[{label:"LKR",backgroundColor:"#f87979",data:e}]},labels:"months"})})]})})}):null]})}}}]);
//# sourceMappingURL=37.a43bda30.chunk.js.map