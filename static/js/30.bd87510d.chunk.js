(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[30],{394:function(e,s,r){"use strict";r(1);var t=r(392),a=r(22);s.a=e=>Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(t.a,{color:e.data.color,children:Object(a.jsx)("strong",{children:e.data.alertMsg})})})},396:function(e,s,r){"use strict";var t=r(1),a=r.n(t),c=r(392),o=r(22);const n=e=>Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(c.I,{backdrop:"static",visible:e.open,onClose:()=>e.close(),children:[Object(o.jsx)(c.L,{children:Object(o.jsx)(c.M,{children:e.titleModal})}),Object(o.jsx)(c.J,{children:e.descModal}),Object(o.jsxs)(c.K,{children:[Object(o.jsx)(c.f,{color:"secondary",onClick:()=>e.close(),children:"Close"}),Object(o.jsx)(c.f,{color:"primary",onClick:()=>{e.data(e.itemID),e.close()},children:"Ok"})]})]})});s.a=a.a.memo(n)},575:function(e,s,r){"use strict";r.r(s);var t=r(1),a=r(404),c=r(392),o=r(394),n=r(396),l=r(22);var i=()=>{const{register:e,handleSubmit:s,watch:r,formState:{errors:i}}=Object(a.a)({mode:"onTouched"}),[d,j]=Object(t.useState)(!1);var[m,u]=Object(t.useState)(!1);const[h,b]=Object(t.useState)({alertMsg:"",color:"success"}),[p,x]=Object(t.useState)(!1);const O=r("password");return Object(t.useEffect)((()=>{}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.l,{xs:6,children:m?Object(l.jsx)(o.a,{data:h}):null}),Object(l.jsxs)(c.U,{children:[Object(l.jsx)(n.a,{open:p,close:x,data:function(){window.location.reload()},onClick:()=>{x(!1)},titleModal:"Updated Successfully",descModal:"Your password is changed",visible:p}),Object(l.jsx)(c.l,{xs:6,children:Object(l.jsxs)(c.h,{className:"mb-4",children:[Object(l.jsx)(c.k,{children:Object(l.jsx)("strong",{children:"Change Password"})}),Object(l.jsx)(c.i,{children:Object(l.jsxs)(c.u,{onSubmit:s((async e=>{j(!1),u(!1),x(!0);try{x(!1);const s=await fetch("".concat("https://express-server-a.herokuapp.com","/api/staff/reset"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(e)});200===s.status?(j(!1),x(!0),b({alertMsg:"Updated Successfully",color:"success"})):400===s.status&&(j(!1),u(!0),b({alertMsg:"Current Password is Wrong",color:"danger"}))}catch(s){console.error("Error:",s),j(!1),u(!0),b({alertMsg:"Server Error",color:"warning"})}})),children:[Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"Current Password"}),Object(l.jsx)(c.w,{type:"Password",id:"current_password",name:"current_password",placeholder:"Current password",invalid:!!i.current_password,...e("current_password",{required:"Required"})}),i.current_password&&Object(l.jsx)("span",{style:{color:"red"},children:i.current_password.message})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"Password"}),Object(l.jsx)(c.w,{type:"Password",id:"password",name:"password",placeholder:"password",invalid:!!i.password,...e("password",{required:"Required",pattern:{value:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,}$/,message:"Minimum six characters, at least one letter and one number:"}})}),i.password&&Object(l.jsx)("span",{style:{color:"red"},children:i.password.message})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"Confirm Password"}),Object(l.jsx)(c.w,{type:"Password",id:"Password2",name:"Password2",placeholder:"Confirm Password",invalid:!!i.Password2,...e("Password2",{required:"Required",validate:e=>e===O||"password do no match"})}),i.Password2&&Object(l.jsx)("span",{style:{color:"red"},children:i.Password2.message})]}),Object(l.jsxs)(c.f,{color:"primary",className:"px-4",type:"submit",children:[d?Object(l.jsx)(c.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,d?"Loading":"Change"]})]})})]})})]})]})};var d=()=>{const{reset:e,register:s,handleSubmit:r,formState:{errors:n}}=Object(a.a)({mode:"onTouched"}),[i,d]=Object(t.useState)(!1),[j,m]=Object(t.useState)();var[u,h]=Object(t.useState)(!1);const[b,p]=Object(t.useState)({alertMsg:"",color:"success"});return Object(t.useEffect)((()=>{(async()=>{try{const e=await fetch("".concat("https://express-server-a.herokuapp.com","/api/staff/profile"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")}});if(200===e.status){const s=await e.json();m(s.user),d(!1)}}catch(e){console.error("Error:",e),d(!1),h(!0),p({alertMsg:"Server Error",color:"warning"})}})()}),[]),Object(t.useEffect)((()=>{e(j)}),[j]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.l,{xs:6,children:u?Object(l.jsx)(o.a,{data:b}):null}),Object(l.jsx)(c.U,{children:Object(l.jsx)(c.l,{xs:6,children:Object(l.jsxs)(c.h,{className:"mb-4",children:[Object(l.jsx)(c.k,{children:Object(l.jsx)("strong",{children:"Your Details"})}),Object(l.jsx)(c.i,{children:Object(l.jsxs)(c.u,{onSubmit:r((async e=>{d(!0);const s=j._id;try{const r=await fetch("".concat("https://express-server-a.herokuapp.com","/api/staff/")+s,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(e)});200===r.status?(d(!1),h(!0),p({alertMsg:"Updated Successfully",color:"success"})):409===r.status?(d(!1),h(!0),p({alertMsg:"User Name already exists",color:"danger"})):500===r.status&&(d(!1),h(!0),p({alertMsg:"Server Error",color:"warning"}))}catch(r){console.error("Error:",r)}})),children:[Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"User Name"}),Object(l.jsx)(c.w,{type:"text",id:"userName",name:"userName",invalid:!!n.userName,...s("userName",{required:"Required",pattern:{value:/^[a-zA-Z]+$/,message:"Enter valid name"}})}),n.userName&&Object(l.jsx)("span",{style:{color:"red"},children:n.userName.message})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"First Name"}),Object(l.jsx)(c.w,{type:"text",id:"firstName",name:"firstName",invalid:!!n.firstName,...s("firstName",{required:"Required",pattern:{value:/^[a-zA-Z]+$/,message:"Enter valid name"}})}),n.firstName&&Object(l.jsx)("span",{style:{color:"red"},children:n.firstName.message})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"Last Name"}),Object(l.jsx)(c.w,{type:"text",id:"lastName",name:"lastName",invalid:!!n.lastName,...s("lastName",{required:"Required",pattern:{value:/^[a-zA-Z]+$/,message:"Enter valid name"}})}),n.lastName&&Object(l.jsx)("span",{style:{color:"red"},children:n.lastName.message})]}),Object(l.jsxs)(c.f,{color:"primary",className:"px-4",type:"submit",children:[i?Object(l.jsx)(c.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,i?"Loading":"Update"]})]})})]})})})]})};s.default=()=>Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(i,{})]})}}]);
//# sourceMappingURL=30.bd87510d.chunk.js.map