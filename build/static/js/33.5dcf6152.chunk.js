(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[33],{394:function(e,t,c){"use strict";c(1);var s=c(392),r=c(22);t.a=e=>Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(s.a,{color:e.data.color,children:Object(r.jsx)("strong",{children:e.data.alertMsg})})})},421:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));const s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M345.994,42.019,179.531,208.481A646.3,646.3,0,0,0,25.325,456.521a24.845,24.845,0,0,0,6,25.708l.087.087a24.84,24.84,0,0,0,17.611,7.342,25.172,25.172,0,0,0,8.1-1.344,646.283,646.283,0,0,0,248.04-154.207L471.62,167.646A88.831,88.831,0,0,0,345.994,42.019ZM282.531,311.48A614.445,614.445,0,0,1,60.419,453.221,614.435,614.435,0,0,1,202.158,231.108l99.162-99.161,80.372,80.372ZM448.993,145.019l-44.674,44.673L323.947,109.32l44.674-44.674a56.832,56.832,0,1,1,80.372,80.373Z' class='ci-primary'/>"]},564:function(e,t,c){"use strict";c.r(t);var s=c(1),r=c(16),a=c(392),n=(c(409),c(410),c(407)),l=c(411),o=c(421),i=c(401),j=c(394),d=c(22);t.default=()=>{const e=Object(r.g)(),[t,c]=Object(s.useState)(!1),[h,b]=Object(s.useState)({});var[O,u]=Object(s.useState)([]);const[x,m]=Object(s.useState)(!1),[p,g]=Object(s.useState)({alertMsg:"",color:"success"}),[f,y]=Object(s.useState)([]),[v,w]=Object(s.useState)([{startDate:new Date,endDate:Object(n.default)(new Date,0),key:"selection"}]);const N=()=>{O.splice(0,O.length),f.splice(0,f.length)};return Object(d.jsxs)("div",{children:[Object(d.jsx)(a.l,{xs:6,children:x?Object(d.jsx)(j.a,{data:p}):null}),Object(d.jsx)(a.U,{children:Object(d.jsx)(a.l,{xs:12,sm:12,children:Object(d.jsxs)(a.h,{className:"mb-4",children:[Object(d.jsx)(a.k,{children:Object(d.jsx)("strong",{children:"Customer Loyalty"})}),Object(d.jsx)(a.i,{children:Object(d.jsxs)(a.u,{className:"row g-4",children:[Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsx)(l.DateRangePicker,{onChange:e=>w([e.selection]),showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:1,ranges:v,direction:"horizontal",maxDate:new Date})}),Object(d.jsx)("div",{className:"col-auto",children:Object(d.jsxs)(a.f,{color:"primary",size:"sm",className:"px-4",onClick:()=>{(async()=>{N();try{const e=await fetch("".concat("https://express-server-a.herokuapp.com","api/reports/customer"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify({state:v})});if(c(!0),200===e.status){m(!1);const t=await e.json();for(let e=1;e<=Math.ceil(t.length/10);e++)f.push(e);for(let e=0;e<10&&e<t.length;e++)O.push(t[e]);b(t),c(!1)}404===e.status&&(m(!0),g({alertMsg:"No data found",color:"warning"}),c(!1)),401===e.status&&(m(!0),c(!1),g({alertMsg:"Unauthorized access",color:"warning"}))}catch(e){c(!1),m(!0),g({alertMsg:"",color:"warning"}),console.log(e,"error")}})()},children:[t?Object(d.jsx)(a.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,t?"Loading":"Generate"]})})]})})]})})}),O.length>0?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(a.U,{children:Object(d.jsx)(a.l,{xs:12,sm:6,children:Object(d.jsxs)(a.h,{className:"mb-4",children:[Object(d.jsx)(a.k,{children:Object(d.jsx)("strong",{children:"Customer Loyalty"})}),Object(d.jsxs)(a.i,{children:[Object(d.jsx)("p",{className:"text-medium-emphasis small",children:"Here the all Customer Loyalty Reports of your shop."}),Object(d.jsxs)(a.cb,{bordered:!0,hover:!0,children:[Object(d.jsx)(a.fb,{color:"dark",children:Object(d.jsxs)(a.hb,{children:[Object(d.jsx)(a.gb,{scope:"col",children:"Customer"}),Object(d.jsx)(a.gb,{scope:"col",children:"Ordered Count"}),Object(d.jsx)(a.gb,{scope:"col",children:"Total"}),Object(d.jsx)(a.gb,{scope:"col",children:"Action"})]})}),Object(d.jsx)(a.db,{children:O.map(((t,c)=>{return Object(d.jsxs)(a.hb,{children:[Object(d.jsx)(a.eb,{children:t[0].firstName+" "+t[0].lastName}),Object(d.jsx)(a.eb,{children:t[0].count}),Object(d.jsxs)(a.eb,{children:["LKR ",(s=t[0].price,"".concat(s.toFixed(2)))]}),Object(d.jsx)(a.eb,{className:"d-flex justify-content-evenly",children:Object(d.jsx)("span",{children:Object(d.jsxs)(a.f,{color:"warning",size:"sm",onClick:()=>e.push("/customers/".concat(t[0].id)),children:[Object(d.jsx)(i.a,{icon:o.a,className:"me-2"}),"View"]})})})]},c);var s}))})]}),Object(d.jsx)(a.S,{align:"center",children:f.map(((e,t)=>Object(d.jsx)(a.T,{onClick:()=>(e=>{u((e=>[]));for(let t=10*e;t<10*(e+1)&&void 0!==h[t];t++)u((e=>[...e,h[t]]))})(t),children:e},t)))})]})]})})})}):null]})}}}]);
//# sourceMappingURL=33.5dcf6152.chunk.js.map