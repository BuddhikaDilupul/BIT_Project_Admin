(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[29],{394:function(e,t,a){"use strict";a(1);var r=a(392),s=a(22);t.a=e=>Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(r.a,{color:e.data.color,children:Object(s.jsx)("strong",{children:e.data.alertMsg})})})},396:function(e,t,a){"use strict";var r=a(1),s=a.n(r),c=a(392),o=a(22);const n=e=>Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(c.I,{backdrop:"static",visible:e.open,onClose:()=>e.close(),children:[Object(o.jsx)(c.L,{children:Object(o.jsx)(c.M,{children:e.titleModal})}),Object(o.jsx)(c.J,{children:e.descModal}),Object(o.jsxs)(c.K,{children:[Object(o.jsx)(c.f,{color:"secondary",onClick:()=>e.close(),children:"Close"}),Object(o.jsx)(c.f,{color:"primary",onClick:()=>{e.data(e.itemID),e.close()},children:"Ok"})]})]})});t.a=s.a.memo(n)},550:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var r=a(1),s=a(404),c=a(392),o=a(394),n=a(16),l=a(396),i=a(22);function d(){const[e,t]=Object(r.useState)(!1);var[a,d]=Object(r.useState)(!1);const[j,m]=Object(r.useState)({alertMsg:"",color:"success"}),[u,b]=Object(r.useState)(!1),h=Object(n.g)(),[g,O]=Object(r.useState)(""),{register:x,handleSubmit:p,watch:y,formState:{errors:f}}=Object(s.a)({mode:"onChange"}),C=y("CategoryName"),v=e=>new Promise(((t,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{t(r.result)},r.onerror=e=>{a(e)}}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(c.l,{xs:6,children:a?Object(i.jsx)(o.a,{data:j}):null}),Object(i.jsx)(l.a,{open:u,close:b,data:()=>{h.push("/categories")},onClick:()=>{b(!1)},titleModal:"Updated Successfully",descModal:"New category has been added",visible:u}),Object(i.jsx)(c.U,{children:Object(i.jsx)(c.l,{xs:12,sm:6,children:Object(i.jsxs)(c.h,{className:"mb-4",children:[Object(i.jsx)(c.k,{children:Object(i.jsx)("strong",{children:"Add Category"})}),Object(i.jsx)(c.i,{children:Object(i.jsxs)(c.u,{onSubmit:p((async e=>{let a={categoryName:C,image:g};try{t(!0),d(!1);const e=await fetch("".concat("https://express-server-a.herokuapp.com","/api/category"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("authToken")},body:JSON.stringify(a)});201===e.status&&(t(!1),b(!0),m({alertMsg:"Updated Successfully",color:"success"})),409===e.status&&(t(!1),d(!0),m({alertMsg:"Category already exist",color:"warning"})),422===e.status&&(t(!1),d(!0),m({alertMsg:"Please fill all values and check you entered values are correct",color:"warning"}))}catch(r){console.error("Error:",r),d(!0),m({alertMsg:"Sorry! We are encountering an issue",color:"danger"})}})),children:[Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)(c.x,{htmlFor:"exampleFormControlInput1",children:"Category Name"}),Object(i.jsx)(c.w,{type:"text",id:"CategoryName",name:"CategoryName",placeholder:"Burger Bun",invalid:!!f.CategoryName,...x("CategoryName",{required:"Required",pattern:{value:/^[a-zA-Z ]+$/,message:"Enter valid name"}})}),f.CategoryName&&Object(i.jsx)("span",{style:{color:"red"},children:f.CategoryName.message})]}),Object(i.jsxs)("div",{className:"mb-3",children:[Object(i.jsx)(c.x,{htmlFor:"formFileSm",children:"Image File"}),Object(i.jsx)(c.w,{type:"file",size:"sm",name:"CategoryImage",onChange:e=>(async e=>{const t=e.target.files[0],a=await v(t);O(a)})(e),id:"formFileSm",required:!0})]}),Object(i.jsxs)(c.f,{color:"primary",size:"sm",className:"px-4",type:"submit",children:[e?Object(i.jsx)(c.Z,{component:"span",size:"sm",variant:"grow","aria-hidden":"true"}):void 0,e?"Loading":"Save"]})]})})]})})})]})}}}]);
//# sourceMappingURL=29.c074a885.chunk.js.map